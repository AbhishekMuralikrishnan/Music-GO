package com.example.nostressmusic;

import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;
import org.json.JSONObject;

import java.io.IOException;

import okhttp3.Call;
import okhttp3.Callback;
import okhttp3.MediaType;
import okhttp3.OkHttpClient;
import okhttp3.Request;
import okhttp3.RequestBody;
import okhttp3.Response;

public class MainActivity extends AppCompatActivity {
    Button b1;
    EditText ed1;
    TextView tx1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        b1 = (Button) findViewById(R.id.button);
        tx1 = (TextView) findViewById(R.id.textView);
        final String testDataECG = "939.4253707,948.357865,81.31774203,12.96443946,12.96419467,6.272368526,64.36314993,5.6,0,9.170129223,114.6344585,-0.408189973,-0.15528643,-5.88E-05,0.000610755,0.013977517,0.004769092,0.00476905,2.930854801,-0.408189973,-0.15528643,2314.26545,76.97572807,690.1132748,22.95413941,99.69539743,2.108525418,0.070132525,0.304602574,3006.487251,327.2966353,0.003055332,2.174498785,1.08471059\n" +
                "898.1860468,907.00686,84.49723585,16.30527867,16.3052737,5.182201271,67.45006559,13.06666667,0.2,11.53341728,118.9392535,0.351789066,-0.656813149,-1.09E-05,-0.000262799,0.018538915,0.008715773,0.008715772,2.127053349,0.351789066,-0.656813149,1373.887112,51.15222526,1298.222619,48.33510357,98.95047182,13.76972944,0.512671162,1.049528181,2685.879461,94.28090982,0.010606601,2.135349707,1.17631483\n" +
                "814.2570213,827.52283,87.01445866,14.6322316,14.63127463,5.946766089,74.58885654,7.733333333,0.8,10.34932616,122.6210564,-0.455007899,-0.37195935,-0.00018672,0.000714178,0.01820405,0.008242212,0.008242207,2.208636605,-0.455007899,-0.37195935,2124.9184,67.4793203,1003.315816,31.86149139,97.97301803,20.75778727,0.659188313,2.026981967,3148.992003,48.33443002,0.020689186,2.174232755,1.122470737\n" +
                "848.6209148,851.57313,57.88633609,14.14265421,14.14254781,4.093031988,71.0401156,8.133333333,0,10.00362878,81.25012753,-0.399626536,-0.189780936,-7.93E-05,-2.59E-05,0.016842223,0.010350772,0.010350736,1.6271466,-0.399626536,-0.189780936,819.5109617,53.9582113,653.7106071,43.04159031,93.48374929,45.56665987,3.000198382,6.516250709,1518.788229,14.34624809,0.069704636,2.206018299,1.291188908\n" +
                "772.7466067,775.00477,51.61021081,10.28816219,10.28809068,5.016465512,77.9969138,2,0.066666667,7.277206445,72.62416943,1.743878298,0.072967226,4.50E-05,-0.000120583,0.013514037,0.007800354,0.007800353,1.732490224,1.743878298,0.072967226,972.279253,69.07129857,405.0194374,28.77282263,93.02952047,30.347138,2.155878801,6.970479526,1407.645828,13.3462153,0.074927609,2.082336544,1.243975866\n" +
                "776.4001781,775.153655,50.2057799,10.97499614,10.97486171,4.574560143,77.60486873,2.466666667,0,7.762988959,70.5760347,-0.481195027,0.058914497,-5.97E-05,-0.000493367,0.014146007,0.00653138,0.00653138,2.165852647,-0.481195027,0.058914497,495.2358714,39.31274119,747.1193377,59.3077175,97.72680239,17.37854763,1.379541315,2.273197607,1259.733757,42.99089622,0.023260739,2.215251331,1.155670037\n" +
                "810.5444307,822.2657,82.6692343,14.03395464,14.03395159,5.890658506,74.88463089,5.8,0.866666667,9.926814034,116.4897548,0.597410539,-0.699956011,2.35E-05,0.000698374,0.018261313,0.009743616,0.009743611,1.874182236,0.597410539,-0.699956011,1485.092887,64.57173912,774.771012,33.68699165,95.08508409,40.04765215,1.74126923,4.914915908,2299.911551,19.34622807,0.051689663,2.088672363,1.175275961\n" +
                "793.6120423,720.74711,199.9621619,14.78600363,14.77937942,13.5237463,79.49135262,8.266666667,0.666666667,10.45408701,282.5959031,0.868394621,1.40032299,0.000458292,0.001166674,0.019543438,0.009370547,0.009370544,2.085624031,0.868394621,1.40032299,4413.028596,81.48633762,960.5523479,17.73654787,95.80248092,42.08593313,0.77711451,4.197519078,5415.666877,22.8235963,0.043814305,1.58928653,1.136107392\n" +
                "994.5599086,1006.96165,107.655379,21.84425419,21.84419645,4.928315614,61.14462541,25.66666667,1.733333333,15.45133418,151.4616042,0.986752066,-0.856022218,-6.26E-05,0.000112493,0.022209311,0.010722797,0.010722752,2.071223748,0.986752066,-0.856022218,2203.85689,52.71928067,1969.203032,47.10603842,99.63054515,7.302294849,0.174680912,0.369454853,4180.362217,269.6690661,0.003708249,2.090519802,1.220616854\n" +
                "775.171469,787.865115,90.13584792,13.42666905,13.42630064,6.713195027,78.56044757,5,0.6,9.496996531,127.1170689,0.299976966,-0.479685692,0.000114857,0.000424701,0.017034788,0.009244535,0.009244527,1.842687444,0.299976966,-0.479685692,1621.169823,67.26746632,758.9951899,31.49311235,96.21348795,29.87049417,1.239421331,3.786512048,2410.035507,25.40952907,0.039355314,2.074665772,1.194097572\n" +
                "729.5015011,722.51064,80.94700886,23.53845167,23.53826612,3.438926654,83.25287781,31.8,1.933333333,16.64962209,113.2591125,-0.567414656,0.318685329,0.000102714,-0.001312383,0.032024309,0.018129545,0.018129461,1.766415464,-0.567414656,0.318685329,1053.978693,29.07820049,2420.937774,66.79121169,94.17585586,149.7187407,4.130587827,5.824144135,3624.635207,16.16990474,0.061843283,2.208484531,1.243021063\n" +
                "864.2132614,865.003415,92.35456926,21.99754357,21.99729942,4.198403744,70.25489043,27.8,1.333333333,15.55963046,129.6789529,-0.070081357,-0.073688916,-0.000111831,-0.001933373,0.025637603,0.01347618,0.013476098,1.902438439,-0.070081357,-0.073688916,1452.78923,41.72820201,1987.25732,57.07963219,97.95412904,41.50587709,1.192165793,2.04587096,3481.552427,47.8789381,0.02088601,2.191371162,1.230270988\n" +
                "571.6601676,567.469775,46.25494741,8.850101059,8.850074886,5.226488049,105.6007765,1.533333333,0.133333333,6.260036385,65.11414796,2.472572231,1.146504567,-3.87E-05,0.000520812,0.014883095,0.008898488,0.008898481,1.672541948,2.472572231,1.146504567,431.9091415,41.60363057,569.5350474,54.86044038,93.94495053,36.7083368,3.535929056,6.055049466,1038.152526,15.51514171,0.064453166,2.027469981,1.204900276\n" +
                "771.6711513,775.62657,44.13138527,9.221930143,9.221589278,4.785482495,78.01353481,1,0,6.5228244,62.06940546,-0.309580543,-0.256470692,-9.11E-05,8.59E-05,0.012094458,0.007382288,0.007382287,1.638307488,-0.309580543,-0.256470692,473.5579118,60.95916708,274.8402653,35.37905974,90.62065815,28.44628205,3.661773179,9.379341845,776.8444592,9.661728899,0.103501145,2.19011449,1.278379541\n" +
                "856.0275776,779.98412,234.0033066,16.08007181,16.08007171,14.55237945,74.7814992,9.333333333,1.466666667,11.37412229,330.7351271,0.375876542,1.030059267,-6.72E-06,0.000431697,0.020468609,0.011394241,0.011394241,1.79639952,0.375876542,1.030059267,8071.030483,92.09111821,646.0488282,7.371469991,93.20495851,47.09973226,0.537411799,6.795041488,8764.179043,13.7166136,0.072904292,1.809153365,1.105977497\n" +
                "938.1048518,943.61449,80.50152143,11.7277183,11.72768334,6.864210016,64.45154948,3.8,0.133333333,8.29549189,113.5437128,-0.527218834,-0.313658474,-2.51E-05,0.000263471,0.012810647,0.004493587,0.004493585,2.850873195,-0.527218834,-0.313658474,1862.635303,76.97481973,554.4792379,22.91427598,99.51833473,2.683660185,0.110904297,0.481665271,2419.798201,206.6130582,0.004839965,2.205622651,1.099376147\n" +
                "949.9758168,958.19505,67.98474581,12.50436114,12.50413665,5.436882784,63.49186209,5.2,0.2,8.844710516,95.73725723,0.010317691,-0.172820219,8.01E-05,0.000266039,0.013368211,0.004449147,0.004449145,3.004667956,0.010317691,-0.172820219,2254.296103,77.03482297,670.7925644,22.92262599,99.81471496,1.245185444,0.042551038,0.185285044,2926.333853,538.7089672,0.00185629,2.130545254,1.081459623\n" +
                "822.1515483,761.172695,262.776917,17.86505108,17.86490195,14.70899332,80.23826714,11.06666667,2.133333333,12.63660903,371.4077709,-0.093672343,0.782152966,-9.42E-05,1.34E-06,0.02467403,0.014692532,0.014692532,1.679358563,-0.093672343,0.782152966,8552.659568,90.33755139,825.4140539,8.71844412,90.23017327,89.37312203,0.944004487,9.76982673,9467.446744,9.235596062,0.108276715,1.908165868,1.126999936\n" +
                "854.3363245,842.601215,117.4852587,16.08968484,16.08953381,7.301899318,71.39303231,11.86666667,1,11.38081524,165.7590091,6.804693345,1.801031935,-9.21E-05,0.000184924,0.018598034,0.010506556,0.010506519,1.770136137,6.804693345,1.801031935,3128.765922,77.28563223,870.3027963,21.49790158,94.6445078,49.24638463,1.216466193,5.355492196,4048.315103,17.67242008,0.056585346,1.827712306,1.211191478\n" +
                "771.8306245,775.532645,45.08063283,9.35897916,9.358922224,4.81683227,78.00991177,1.266666667,0,6.619965865,63.40901328,-0.076976152,-0.310591455,-3.51E-05,-0.000132434,0.012359953,0.007712859,0.007712856,1.602512482,-0.076976152,-0.310591455,524.2081064,63.58741292,266.8541912,32.36990698,88.8975752,33.32743986,4.0426801,11.1024248,824.3897374,8.007041413,0.124890075,2.18553071,1.274861607\n" +
                "997.6272109,994.45881,95.81033074,21.36873476,21.36866973,4.483668866,60.70533376,24.86666667,1.533333333,15.1149738,134.6505719,-0.929329576,0.045606017,4.86E-05,-0.000227005,0.021864522,0.011111182,0.011111153,1.967794521,-0.929329576,0.045606017,1798.39157,50.97688222,1714.314973,48.59366219,99.12397332,15.15057959,0.429455589,0.876026676,3527.857123,113.151775,0.008837687,2.222072439,1.217681404\n" +
                "766.4249848,770.59323,65.3229663,9.800702581,9.800700306,6.66513097,78.8914188,1.533333333,0,6.932454392,92.12014399,0.309495611,-0.450163482,9.43E-06,0.000409997,0.01287208,0.00642145,0.006421429,2.004544133,0.309495611,-0.450163482,1304.787047,75.44809734,405.1428904,23.4270108,95.41831085,19.45369571,1.12489186,4.581689149,1729.383633,20.82601149,0.048016875,2.139859825,1.151655698\n" +
                "1022.57853,1019.9713,97.31221067,21.03977358,21.03915207,4.625154842,59.21439827,24.13333333,1.533333333,14.88189187,136.8132376,-0.794081375,0.049689804,0.000147936,-0.000119308,0.021153004,0.010472662,0.010472652,2.019830694,-0.794081375,0.049689804,1851.995755,52.31352949,1678.653512,47.41711192,99.43514672,9.535792709,0.269358594,0.564853283,3540.18506,176.0371228,0.00568062,2.225928828,1.213239221\n" +
                "787.2624685,797.62179,86.41751587,14.55420863,14.55407981,5.937630693,77.17927992,6.8,0.8,10.29472296,121.7784578,-0.475435088,-0.17834625,-5.74E-05,0.000362422,0.018605625,0.009004217,0.009004215,2.066323509,-0.475435088,-0.17834625,2073.338691,64.79868253,1093.442013,34.17367465,97.08066946,32.88109448,1.027642812,2.919330543,3199.661798,33.25442873,0.030071183,2.190400682,1.133677142\n" +
                "759.5248097,761.42964,55.90174733,9.380021503,9.380019579,5.959660893,79.43383884,0.533333333,0,6.634888926,78.77809948,-0.275729945,-0.094976439,2.42E-06,-0.00014164,0.01238024,0.006037733,0.006037731,2.050478354,-0.275729945,-0.094976439,968.1288704,68.77312649,421.5268091,29.94406783,95.89198167,18.05823415,1.282805687,4.108018329,1407.713914,23.34263725,0.042840061,2.185404121,1.143312246\n" +
                "930.8841579,935.801615,79.56657186,13.92893086,13.92893045,5.712324418,64.93270754,7,0,9.85252809,112.0919551,-0.44654605,0.03908822,1.64E-05,0.000621009,0.015154848,0.004637235,0.004637105,3.268078473,-0.44654605,0.03908822,2997.363129,78.58650072,814.2774791,21.34917091,99.69958964,2.453544631,0.064328371,0.300410363,3814.094153,331.8779976,0.003013155,2.188716511,1.069068275\n" +
                "766.5930198,747.62456,163.3121889,14.87873273,14.86932838,10.97621631,81.45291423,7.8,1.066666667,10.51771176,230.7187028,3.974364075,1.413266258,-0.000588112,-0.000275498,0.020659951,0.011978619,0.011978586,1.724735641,3.974364075,1.413266258,7321.941625,91.75044709,610.5708018,7.650995721,92.74436818,47.76653317,0.598557186,7.255631822,7980.27896,12.78239724,0.078232587,1.834579233,1.130239274\n" +
                "1098.972912,1093.78705,101.0766064,17.36756951,17.36746842,5.819847525,55.08265411,14.13333333,0.8,12.28475303,142.4150469,0.08984374,-0.251115314,3.74E-05,-0.000932386,0.016117217,0.006415903,0.006415884,2.512073044,0.08984374,-0.251115314,2505.369992,71.84600497,981.3040011,28.1406628,99.95264535,0.464913239,0.013332226,0.047354651,3487.138906,2110.72501,0.000473771,2.174444008,1.136256618\n" +
                "875.1250105,880.882475,88.97399005,16.92929982,16.92794851,5.255621378,69.34103357,9.533333333,1.6,11.9738618,125.2572092,0.575266001,-0.518431054,-0.000255221,-0.00019655,0.020729048,0.010463371,0.010463247,1.981106115,0.575266001,-0.518431054,2555.74175,70.90414015,1004.722085,27.87408216,95.80085382,44.03901149,1.221777686,4.199146176,3604.502847,22.81436507,0.043832033,2.159647334,1.181648859\n" +
                "924.5860466,920.73903,83.57151255,11.87404016,11.87403275,7.038169941,65.43943865,3.866666667,0.133333333,8.399011082,117.8891515,-0.639949214,-0.100030009,2.39E-05,0.000485788,0.013132531,0.00482328,0.004823275,2.72273871,-0.639949214,-0.100030009,1844.526994,76.97114648,547.9278335,22.86474184,99.28736497,3.93275187,0.164111678,0.712635034,2396.387579,139.3242827,0.0071775,2.205348212,1.104649567";
        final String eegAndGSR = "992,10\n" +
                "990,8\n" +
                "989,8\n" +
                "979,9\n" +
                "978,7\n" +
                "969,10\n" +
                "954,10\n" +
                "952,7\n" +
                "939,8\n" +
                "935,6\n" +
                "934,7\n" +
                "930,10\n" +
                "917,9\n" +
                "907,9\n" +
                "906,8\n" +
                "901,10\n" +
                "888,8\n" +
                "883,7\n" +
                "882,9\n" +
                "868,10\n" +
                "861,9\n" +
                "861,6\n" +
                "857,6\n" +
                "856,6\n" +
                "854,10\n" +
                "852,7\n" +
                "843,9\n" +
                "837,10\n" +
                "835,10\n" +
                "820,7";

        final String noStressEEGGSR = "1206,5\n" +
                "1190,1\n" +
                "1043,1\n" +
                "1018,3\n" +
                "933,0\n" +
                "907,4\n" +
                "901,3\n" +
                "890,3\n" +
                "879,2\n" +
                "877,3\n" +
                "863,2\n" +
                "863,0\n" +
                "850,3\n" +
                "848,5\n" +
                "841,1\n" +
                "825,3\n" +
                "823,4\n" +
                "822,2\n" +
                "816,0\n" +
                "810,2\n" +
                "804,5\n" +
                "800,3\n" +
                "775,4\n" +
                "764,3\n" +
                "762,4\n" +
                "753,0\n" +
                "748,5\n" +
                "748,3\n" +
                "738,2\n" +
                "735,5\n" +
                "735,1\n" +
                "728,5\n" +
                "723,1\n" +
                "714,3\n" +
                "706,0\n" +
                "702,1\n" +
                "699,3\n" +
                "698,0\n" +
                "697,0\n" +
                "697,0\n" +
                "694,5\n" +
                "688,4\n" +
                "683,0\n" +
                "680,2\n" +
                "678,3\n" +
                "678,3\n" +
                "676,0\n" +
                "675,2\n" +
                "675,2\n" +
                "673,2\n" +
                "672,1\n" +
                "670,2\n" +
                "669,0\n" +
                "668,3\n" +
                "668,1\n" +
                "666,2\n" +
                "665,5\n" +
                "665,5\n" +
                "663,1\n" +
                "661,3\n" +
                "660,0\n" +
                "658,0\n" +
                "658,5\n" +
                "658,4\n" +
                "658,1\n" +
                "656,1\n" +
                "656,4\n" +
                "655,3\n" +
                "652,0\n" +
                "652,0\n" +
                "652,4\n" +
                "651,5\n" +
                "647,5\n" +
                "645,5\n" +
                "645,5\n" +
                "644,5\n" +
                "643,0\n" +
                "639,0\n" +
                "638,5\n" +
                "637,4\n" +
                "634,5\n" +
                "633,3\n" +
                "633,2\n" +
                "632,4\n" +
                "632,5\n" +
                "632,4\n" +
                "631,4\n" +
                "631,5\n" +
                "630,2";

        final String noStressECG = "653.9675073,665.245145,122.5009043,17.58216142,17.58123181,6.967340441,95.20737666,10.8,1.466666667,12.43595701,172.7955152,-1.081098408,-0.008410502,0.000282307,7.42E-06,0.030783171,0.021782615,0.021782601,1.413199019,-1.081098408,-0.008410502,2016.367038,64.48468951,862.9152971,27.5965754,77.70332012,247.6103481,7.918735088,22.29667988,3126.892683,3.484972675,0.286946296,2.16068874,1.25877339\n" +
                "868.4641516,855.847515,94.48503147,12.22621101,12.22619994,7.728071387,69.85381867,5.466666667,0.133333333,8.648113995,133.3418631,1.422332178,0.974867591,-2.19E-05,7.82E-05,0.013805599,0.005825108,0.005825108,2.370015848,1.422332178,0.974867591,2187.790418,77.46692456,627.5061051,22.21920697,98.60707667,8.864149713,0.313868464,1.392923325,2824.160673,70.79146059,0.014125998,1.982718085,1.135043714\n" +
                "877.2823016,833.783785,138.86422,12.07075894,12.06580359,11.50418302,69.84741568,5.133333333,0.2,8.534658801,196.1981213,1.455894503,1.475626263,-0.000366461,-0.00107258,0.013591241,0.006189788,0.006189768,2.195752183,1.455894503,1.475626263,1074.563844,60.89184821,680.3603687,38.55368904,98.58223231,9.784653137,0.55446274,1.417767691,1764.708866,69.53341719,0.014381574,1.612868295,1.163699351\n" +
                "803.150918,807.93379,66.25702273,18.44761172,18.44744838,3.591631466,75.24582313,16.8,0.6,13.04866903,92.78856804,0.354258411,-0.446121932,0.000124087,-0.000931547,0.023184539,0.012676245,0.012676223,1.828975372,0.354258411,-0.446121932,748.2555576,35.91397632,1290.317796,61.93130448,96.63777049,44.89284624,2.1547192,3.36222951,2083.4662,28.7421695,0.034792085,2.150559991,1.261259482\n" +
                "732.834208,724.919715,73.55562917,9.780438944,9.78039253,7.520687936,82.62823315,2.066666667,0,6.918089834,103.7930691,5.078922811,1.45951635,4.61E-05,-0.000336125,0.013363681,0.007699075,0.007699075,1.735751462,5.078922811,1.45951635,2233.216829,85.20902671,354.0560368,13.50910933,91.33347121,33.59597305,1.281863959,8.666528793,2620.868839,10.5386451,0.094888858,1.948105129,1.17310643\n" +
                "793.0305939,796.781765,31.68429651,7.511913801,7.511598875,4.217872749,75.78261505,0.4,0,5.313275071,44.49222852,-0.3457039,-0.469543535,-8.22E-05,-0.001070925,0.009647229,0.006009354,0.006009354,1.605368626,-0.3457039,-0.469543535,192.0060443,45.33150531,211.8786011,50.02329987,91.50297654,19.67517903,4.645194821,8.497023464,423.5598245,10.7688271,0.092860624,2.175931871,1.242849162\n" +
                "712.3749812,705.15014,63.95541901,9.752521769,9.752517021,6.557834017,84.90239816,1.666666667,0,6.898372295,90.18316751,-0.178389509,0.268943953,-1.65E-05,2.62E-05,0.013629776,0.007851536,0.007851536,1.735937483,-0.178389509,0.268943953,1242.746948,73.25892296,425.99519,25.11207036,93.9082234,27.63408183,1.629006674,6.0917766,1696.37622,15.41557243,0.064869469,2.150858009,1.17055436\n" +
                "1005.779392,1007.29025,93.33414402,21.34424677,21.34367433,4.372801019,60.18355573,22.46666667,2.4,15.09729348,131.1281686,-0.481087465,-0.067811495,0.000148499,-0.001670497,0.021599685,0.009123122,0.00912311,2.367576006,-0.481087465,-0.067811495,2625.379764,59.10028472,1811.560092,40.78027822,99.70797581,5.305687633,0.119437064,0.292024193,4442.245543,341.4373814,0.002928795,2.216009657,1.141907031\n" +
                "836.3657566,738.41573,297.0537912,21.59423842,21.58535734,13.75615965,80.19200707,15.66666667,4,15.26824621,419.81995,-0.471260408,0.836030984,0.000654074,0.001516904,0.030435431,0.015953652,0.015953651,1.907740645,-0.471260408,0.836030984,7597.99056,80.08264618,1767.08361,18.62502071,93.51152205,122.6125165,1.292333111,6.488477951,9487.686686,14.41193493,0.069386936,1.794608086,1.141907503\n" +
                "890.6161882,897.877705,99.02859103,15.49150823,15.49141142,6.392443496,68.24516332,11.4,0.133333333,10.95773769,139.6182354,-0.354547996,-0.159933864,4.36E-05,0.000476871,0.017419465,0.008227171,0.008227089,2.117309163,-0.354547996,-0.159933864,2344.863134,71.4721121,918.4029471,27.99318965,98.12569983,17.54242567,0.53469825,1.874300166,3280.808506,52.35324716,0.019101012,2.191164259,1.168653123\n" +
                "705.6852822,707.68352,32.56120115,9.370028058,9.369971023,3.475037742,85.21077037,0.533333333,0,6.627781153,45.5690263,0.739642641,-0.549371148,-3.93E-05,0.000362153,0.013361212,0.00923237,0.009232347,1.447213712,0.739642641,-0.549371148,295.2071125,49.1959531,256.2135518,42.69771744,84.04392966,48.64314972,8.106329458,15.95607034,600.063814,5.267207269,0.18985393,2.120018959,1.347046614\n" +
                "779.6448556,784.13835,66.10693203,10.72946745,10.72881274,6.161250064,77.53245634,2.466666667,0.266666667,7.588948,93.18079627,-0.436406153,-0.215474381,0.000158485,-0.000228222,0.014086625,0.007597007,0.007596974,1.85423359,-0.436406153,-0.215474381,674.7286442,55.22120292,519.4729547,42.51475269,94.94393656,27.66356979,2.264044389,5.056063441,1221.865169,18.77823284,0.053253147,2.21614018,1.21306954\n" +
                "888.7738381,885.03152,68.75628083,12.27987039,12.27986817,5.599104766,67.91512971,4.666666667,0,8.686075827,96.84732517,-0.545120974,0.10461237,-5.97E-06,-0.000153883,0.013928411,0.004897856,0.004897855,2.843776947,-0.545120974,0.10461237,1804.839383,72.69496587,672.372367,27.08168202,99.18201124,5.545290223,0.223352109,0.817988758,2482.75704,121.2510689,0.00824735,2.215528502,1.072284789\n" +
                "691.8558971,687.453095,41.53832155,9.542242632,9.541885832,4.353098443,87.02868679,2.866666667,0,6.749383848,58.35503519,0.84763066,0.587918824,9.89E-05,0.000254424,0.013529742,0.007118026,0.007117961,1.900771742,0.84763066,0.587918824,420.2080577,43.94646292,507.8202634,53.10917762,94.74723699,28.15342779,2.944359461,5.252763009,956.1817489,18.0375998,0.055439749,2.065290858,1.175475689\n" +
                "820.5354782,820.249965,56.18761421,19.42649941,19.42648609,2.892318015,73.47270697,21.4,0.333333333,13.74118427,78.26414145,-0.316867359,-0.111111823,3.88E-05,-0.002394261,0.023677131,0.013180007,0.013180007,1.796442928,-0.316867359,-0.111111823,786.5962335,36.45929388,1335.207385,61.88781024,97.39868192,35.66063779,1.65289588,2.601318085,2157.464256,37.44205005,0.026707939,2.205509638,1.287923277\n" +
                "879.4093175,878.37554,68.53035996,12.69097809,12.69097795,5.399927372,68.64501053,5.8,0,8.976871352,96.49992877,-0.633032564,0.080163597,-1.94E-05,-0.000329331,0.014564028,0.005370929,0.005370902,2.711640263,-0.633032564,0.080163597,1762.122634,71.28202103,703.9123887,28.47491811,99.15362825,6.008570437,0.243060861,0.846371749,2472.043593,117.1513917,0.008535963,2.219891824,1.07987333\n" +
                "960.2162589,806.52998,339.5950163,14.61625281,14.61279832,23.23406832,71.1040236,8.133333333,1.066666667,10.33625708,480.1486354,-1.272116034,0.356894654,-0.000360033,-0.00029348,0.020466001,0.011648123,0.01164812,1.757021383,-1.272116034,0.356894654,3493.141499,79.18395694,894.1412524,20.26875878,97.37085344,24.14303986,0.54728428,2.629146558,4411.425791,37.0351562,0.027001371,1.810560863,1.105105589\n" +
                "858.6985265,861.554355,61.00018549,13.69001342,13.6899197,4.45581634,70.23377933,6.666666667,0.4,9.683465568,85.7220844,0.174538886,-0.095025854,-4.72E-05,0.000241043,0.016007965,0.008484183,0.008484139,1.886800945,0.174538886,-0.095025854,1345.23914,65.24550476,690.7678128,33.50296113,96.39892884,25.80427062,1.251534104,3.601071157,2061.811223,26.76951513,0.037355925,2.155024267,1.207884426\n" +
                "876.959556,883.27445,79.07647784,16.18351445,16.1828347,4.886236428,69.04104592,11.73333333,0.4,11.44681094,111.243648,1.42031258,-0.830869649,0.000144609,-0.000239007,0.018770908,0.009742932,0.009742919,1.926617998,1.42031258,-0.830869649,1522.176391,58.5532655,1047.664338,40.30030194,97.23396169,29.80316394,1.146432556,2.766038315,2599.643893,35.15278916,0.028447245,2.032006425,1.213068496\n" +
                "792.7209672,796.564435,32.06877806,7.496535869,7.496519554,4.277812929,75.81670398,0.333333333,0,5.302608822,45.0410412,0.557112692,-0.690522452,1.73E-05,-0.000963756,0.009665228,0.00616766,0.006167651,1.567081871,0.557112692,-0.690522452,178.9097393,44.55294277,201.5397635,50.18837758,90.51585439,21.11710128,5.258679647,9.484145615,401.5666042,9.543912342,0.104778833,2.146792761,1.250222416\n" +
                "780.6723253,780.917,50.35955759,11.25603451,11.25542034,4.474005257,77.1787503,1.933333333,0,7.961440075,70.77277409,-0.247509727,0.065800647,-0.000149057,-0.001231286,0.014404816,0.006313457,0.006313453,2.28160524,-0.247509727,0.065800647,565.8534886,41.20565832,793.0986077,57.75373114,98.23008386,14.2901031,1.040610542,1.769916139,1373.242199,55.49985205,0.018018066,2.198134932,1.136938929\n" +
                "734.1870356,736.601375,61.74521844,10.44427558,10.44417047,5.911871817,82.31969269,2.2,0,7.387608353,87.00785736,-0.150368685,-0.136059512,-6.22E-05,0.000353494,0.014213874,0.007347841,0.00734784,1.934428672,-0.150368685,-0.136059512,1460.391097,78.1297643,381.027129,20.3846489,93.20726663,27.76838963,1.4855868,6.792733375,1869.186616,13.72161418,0.072877723,2.180873333,1.146991592\n" +
                "620.4995393,642.83937,132.9485106,16.77169355,16.77165866,7.926958013,101.0846448,9.2,2.333333333,11.86331131,187.6429449,5.474662941,1.224007929,-6.39E-05,0.000656133,0.029826421,0.021754266,0.02175426,1.371060762,5.474662941,1.224007929,4397.634471,79.31055577,914.3994416,16.49103135,79.70746416,232.7948032,4.198412885,20.29253584,5544.828716,3.927920335,0.254587648,1.776742701,1.219662409\n" +
                "771.1541348,793.465575,111.6576371,13.42093961,13.42093916,8.319658714,79.80463671,7.266666667,0.266666667,9.493204132,157.6221271,0.664651931,-0.787685519,5.44E-06,0.000178445,0.018431817,0.009429884,0.009429883,1.954617614,0.664651931,-0.787685519,3182.841349,78.58160603,827.1566618,20.42178412,95.34694405,40.3663302,0.996609855,4.65305595,4050.364341,20.49125243,0.048801312,2.033656832,1.140166364\n" +
                "888.9817098,891.614375,69.67694835,12.68993965,12.68974539,5.490723383,67.91362586,5.666666667,0,8.975999509,98.12841431,-0.405482961,0.012156219,7.67E-05,-2.50E-05,0.014449531,0.00457672,0.004576714,3.157180462,-0.405482961,0.012156219,2320.439377,78.38749548,635.8184989,21.47878553,99.38128874,3.958371524,0.133718999,0.618711258,2960.216248,160.6262816,0.006225631,2.212906607,1.066502931\n" +
                "771.7855489,759.79794,104.816172,10.7941535,10.78796161,9.710457796,78.93863164,2.133333333,0.066666667,7.630786527,148.035911,8.49087887,2.211448671,-0.000350484,-0.000904838,0.013938825,0.00656508,0.006565056,2.12317691,8.49087887,2.211448671,933.1544717,59.51449771,617.3559521,39.37357695,97.25352218,17.43437553,1.111925339,2.746477817,1567.944799,35.41027042,0.028240394,1.844926644,1.140420447\n" +
                "722.0806663,719.765365,47.98430729,9.485965242,9.485954392,5.058452784,83.46631315,1.266666667,0,6.709821149,67.52751877,0.045920778,-0.051975575,2.71E-06,0.000235115,0.013208922,0.00750239,0.007502323,1.760628496,0.045920778,-0.051975575,869.6251242,67.73137311,382.5936754,29.79858132,92.34536512,31.71371829,2.470045571,7.654634885,1283.932518,12.06398039,0.082891381,2.166711549,1.190179414\n" +
                "828.1543007,833.26823,67.30830937,11.97292382,11.97291896,5.621710318,72.94373436,3.6,0,8.468957531,94.81083154,0.605042542,-0.096669375,1.85E-05,8.68E-05,0.0145371,0.007612405,0.007612397,1.909659444,0.605042542,-0.096669375,1513.028887,72.74263424,541.6202042,26.03974105,95.53285994,25.32629417,1.217624706,4.467140065,2079.975385,21.38568716,0.046760246,2.114704928,1.203840508\n" +
                "809.6833395,830.66656,121.5124191,13.35119073,13.35118211,9.101242098,75.95081003,3.8,1.2,9.443861985,171.5848171,0.110169098,-0.228475625,-2.69E-05,-0.000694606,0.017004888,0.008221557,0.00822141,2.068329417,0.110169098,-0.228475625,3046.277541,80.2718395,726.5697984,19.14569288,97.04753203,22.10436484,0.582467619,2.952467966,3794.951705,32.86996951,0.030422906,1.883512009,1.167990776\n" +
                "738.8081272,757.84402,89.93119432,15.78852365,15.7884516,5.695985028,82.97376877,9.2,1.2,11.16784691,126.6906414,5.075998508,-1.702626427,-6.30E-05,-0.001343826,0.024924134,0.01357072,0.013570703,1.836611125,5.075998508,-1.702626427,1263.306202,49.48136794,1214.937927,47.58687207,94.19667582,74.85061007,2.93175999,5.803324181,2553.094739,16.23150334,0.061608588,1.811262635,1.210361122";
        b1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                final String ipv4Address = "4d9b862e.ngrok.io/";
                String postUrl = "https://" + ipv4Address;
                try {
                    MediaType mediaType = MediaType.parse("application/json; charset=utf-8");
                    JSONObject sample = new JSONObject();
                    sample.put("testDataECG", testDataECG);
                    sample.put("eegAndGSR", eegAndGSR);
//                    sample.put("testDataECG", noStressECG);
//                    sample.put("eegAndGSR", noStressEEGGSR);
//                    System.out.println(sample.toString());
                    RequestBody postBody = RequestBody.create(mediaType, sample.toString());
                    postRequest(postUrl, postBody);
                    System.out.println(postBody.toString());
                    Toast.makeText(getApplicationContext(), "Evaluating the value", Toast.LENGTH_LONG).show();//display the text of button1
                }
                catch(Exception e){
                    System.out.println(e);
                }
            }
        });
    }

    void postRequest(String postUrl, RequestBody postBody) {
        OkHttpClient client = new OkHttpClient();
        Request request = new Request.Builder()
                .url(postUrl)
                .post(postBody)
                .build();
        client.newCall(request).enqueue(new Callback() {
            @Override
            public void onFailure(Call call, IOException e) {
                System.out.println(e);
                // Cancel the post on failure.
                call.cancel();
                // In order to access the TextView inside the UI thread, the code is executed inside runOnUiThread()
                runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        System.out.println("Failed To Connect");

                    }
                });
            }
            @Override
            public void onResponse(Call call, final Response response) {
                // In order to access the TextView inside the UI thread, the code is executed inside runOnUiThread()
                System.out.println("ABHISHEK RESPONSE");
                try {
                    Intent i = new Intent(MainActivity.this, Screen2Activity.class);
                    Bundle bundle = new Bundle();
                    i.putExtra("Prediction", response.body().string());
                    System.out.println("ABHISHEK INTENT");
                    startActivity(i);
                }
                catch(Exception e){
                    System.out.println(e);
                }
            }
        });
    }
}
